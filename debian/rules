#!/usr/bin/make -f

# Uncomment this to turn on verbose mode.
#export DH_VERBOSE=1

# DEB_HOST_MULTIARCH ?= $(shell dpkg-architecture -qDEB_HOST_MULTIARCH)

configure_opts	:= --prefix=/usr --sysconfdir=/etc --mandir=/usr/share/man --disable-silent-rules

override_dh_auto_configure:
	./configure $(configure_opts) --

%:
	dh $@ --with autoreconf,systemd

override_dh_fixperms:
	dh_fixperms
	chmod a+x debian/nftables/etc/nftables.conf

override_dh_installexamples:
	dh_installexamples
	rm -rf debian/nftables/etc/nftables/bridge*
	rm -rf debian/nftables/etc/nftables/inet*
	rm -rf debian/nftables/etc/nftables/ipv*

override_dh_systemd_enable:
	dh_systemd_enable --no-enable

override_dh_systemd_start:
	dh_systemd_start --no-start

override_dh_installinit:
	dh_installinit --no-start

# https://wiki.debian.org/DebugPackage
.PHONY: override_dh_strip
override_dh_strip:
	dh_strip --dbg-package=nftables-dbg

override_dh_auto_install:
	dh_auto_install --destdir=debian/nftables

override_dh_installdocs:
	dh_installdocs --link-doc=nftables
